(()=>{"use strict";var t={d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{L:()=>u});class e{constructor(t){this.idprojecto=(new Date).getTime(),this.projecto=t,this.taskList=[]}newTask(t){this.taskList.push(t)}}class o{constructor(t){this.id=(new Date).getTime(),this.tarea=t,this.date=new Date,this.completed=!1}}const a=document.querySelector("#new-project"),r=(document.querySelector(".container-projects"),document.querySelector(".input-project")),s=document.querySelector(".todo-list"),n=document.querySelector("#new-task"),c=document.querySelector(".input-task"),d=document.querySelector(".containerlist");let i="";c.disabled=!0;const l=t=>{const e=`\n    <div class="project" data-id="${t.idprojecto}">\n          <p>${t.projecto}</p>\n    </div>\n    `,o=document.createElement("div");return o.innerHTML=e,d.appendChild(o),o},p=t=>{const e=`\n    <li class="${t.completed?"completed":""}" data-id="${t.id}">\n        <div class="view">\n            <input class="toggle" type="checkbox" ${t.completed?"checked":""}>\n            <label>${t.tarea} <span>${t.date}</span></label>\n            <button class="destroy"></button>\n        </div>\n    </li>\n    `,o=document.createElement("div");return o.innerHTML=e,s.append(o.firstElementChild),o.firstElementChild};a.addEventListener("click",(()=>{const t=new e(r.value);""!=r.value&&(u.newTodo(t),l(t),r.value="")})),d.addEventListener("click",(t=>{s.innerHTML="",c.disabled=!1;const e=t.target.parentElement.getAttribute("data-id");i=e,u.findTaskLength(i)>0&&u.findTask(i).forEach((t=>{p(t)}))})),n.addEventListener("click",(()=>{const t=new o(c.value);""!=c.value&&(u.addTask(i,t),p(t),c.value="")})),s.addEventListener("click",(t=>{const e=t.target.parentElement.parentElement.getAttribute("data-id"),o=t.target.parentElement.parentElement;"input"==t.target.localName&&(u.taskCompleted(i,e),o.classList.toggle("completed")),"button"==t.target.localName&&(u.deleteTask(i,e),s.removeChild(o))}));const u=new class{constructor(){this.cargarLocalStorage()}newTodo(t){this.todo.push(t),this.guardarLocalStorage()}addTask(t,e){for(const o of this.todo)o.idprojecto==t&&(o.taskList.push(e),this.guardarLocalStorage())}findTask(t){for(const e of this.todo)if(e.idprojecto==t)return e.taskList}findTaskLength(t){for(const e of this.todo)if(e.idprojecto==t)return e.taskList.length}taskCompleted(t,e){for(const o of this.todo)if(o.idprojecto==t)for(const t of o.taskList)t.id==e&&(t.completed=!t.completed,this.guardarLocalStorage())}deleteTask(t,e){for(const o of this.todo)o.idprojecto==t&&(o.taskList=o.taskList.filter((t=>t.id!=e)),this.guardarLocalStorage())}guardarLocalStorage(){localStorage.setItem("todo",JSON.stringify(this.todo))}cargarLocalStorage(){this.todo=localStorage.getItem("todo")?this.todo=JSON.parse(localStorage.getItem("todo")):[]}};u.todo.forEach((t=>l(t)))})();